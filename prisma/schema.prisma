generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  owner
  admin
  support
  user
}

enum UserStatus {
  online
  offline
}

model User {
  id           String     @id @default(uuid())
  userName     String
  userPhone    String     @unique
  password     String
  companyName  String?
  companyphone String?
  image        String?
  addrace      String?
  email        String?
  comments     Comment[]  @relation("UserComments")
  buy          Sold[]     @relation("UserBuys")
  role         Role       @default(user)
  ban          Boolean    @default(false)
  status       UserStatus @default(offline)
  lastLogin    DateTime?
  createdAt    DateTime   @default(now())
}

model Comment {
  id        String   @id @default(uuid())
  title     String
  content   String
  rate      Int?
  report    Boolean  @default(false)
  createdAt DateTime @default(now())

  user   User   @relation("UserComments", fields: [userId], references: [id])
  userId String
}

model Sold {
  id        String        @id @default(uuid())
  user      User          @relation("UserBuys", fields: [userId], references: [id])
  userId    String
  products  SoldProduct[] // üëà Ÿáÿ± ÿÆÿ±€åÿØ ÿ¥ÿßŸÖŸÑ ⁄ÜŸÜÿØ ŸÖÿ≠ÿµŸàŸÑ
  createdAt DateTime      @default(now())
}

model SoldProduct {
  id        String  @id @default(uuid())
  sold      Sold    @relation(fields: [soldId], references: [id])
  soldId    String
  product   Product @relation(fields: [productId], references: [id])
  productId String
  quantity  Int     @default(1)
  price     Float
}

model Car {
  id            String       @id @default(uuid())
  series        String       @unique
  fromYear      DateTime?
  toYear        DateTime?
  body          String?
  brakes        Product[]    @relation("CarBrakes")
  imageCar      String?
  companyId     String
  company       Company      @relation(fields: [companyId], references: [id])
  countryId     String?
  country       Country?     @relation(fields: [countryId], references: [id])
  productBaseId String?
  productBase   ProductBase? @relation("CarBaseBrakes", fields: [productBaseId], references: [id])
}

model Company {
  id    String @id @default(uuid())
  name  String @unique
  image String
  cars  Car[]
}

model ProductBase {
  id              String           @id @default(uuid())
  name            String 
  ProductBaseType EProductBaseType
  image           String?

  // ŸÖÿ¥ÿÆÿµÿßÿ™ ŸÅŸÜ€å
  DicsType          EDicsType?
  DiscThicknessMax  Float?
  DiscThicknessMin  Float?
  NumOfHoles        Float?
  CenteringDiameter Float?
  PitchCircle       Float?
  Outter            Float?
  Drum              Float?
  Height            Float?
  StructureMaterial String?
  length            Float?
  width             Float?
  Thickness         Float?
  PcsInSet          Float?
  BrakeSystem       String?
  Radius            Float?

  mainTechnicalCode String[] @default([])
  FMSITechnicalCode String[] @default([])
  HIQTechnicalCode  String[] @default([])
  WVATechnicalCode  String[] @default([])

  variants Product[]
  cars     Car[]     @relation("CarBaseBrakes")
}

model Product {
  id            String       @id @default(uuid())
  productBaseId String? // Nullable ŸÖŸàŸÇÿ™
  productBase   ProductBase? @relation(fields: [productBaseId], references: [id])

  brandId String? // Nullable ŸÖŸàŸÇÿ™
  brand   Brand?  @relation(fields: [brandId], references: [id])

  countryId String?
  country   Country? @relation(fields: [countryId], references: [id])

  price Float?
  stock Int?   @default(0)

  soldProducts SoldProduct[]
  cars         Car[]         @relation("CarBrakes")
}

model Brand {
  id        String    @id @default(uuid())
  name      String    @unique
  image     String?
  products  Product[]
  countryId String
  country   Country   @relation(fields: [countryId], references: [id])
}

model FAQ {
  id        String @id @default(uuid())
  answer    String
  questions String
}

model Country {
  id           String @id @default(uuid())
  countryName  String @unique
  flagImage    String
  countryImage String

  brands   Brand[]
  cars     Car[]
  products Product[]
}

// enum

enum EProductBaseType {
  frontRotor
  frontBrake
  rearRotor
  rearBrake
  parkingShoe
}

enum EDicsType {
  Solid
  Vented
  Drilled
  Slotted
  Floating
  Carbon
}
